<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Check_the_Paid_Box</fullName>
        <field>Paid__c</field>
        <literalValue>1</literalValue>
        <name>Check the Paid Box</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Mark_Paid</fullName>
        <field>Paid__c</field>
        <literalValue>0</literalValue>
        <name>Mark Paid</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Populate_Appt_Goal</fullName>
        <field>Appointment_Goal__c</field>
        <formula>Account__r.Monthly_Appt_Goal__c</formula>
        <name>Populate Appt Goal</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Uncheck_Box</fullName>
        <field>Assign_To_Correct_Account__c</field>
        <literalValue>0</literalValue>
        <name>Uncheck Box</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Dealer_Downloads_Costs</fullName>
        <field>Dealer_Downloads_Costs__c</field>
        <formula>IF(Account__r.RecordType.Name = &apos;Dealer Account&apos;, 250, 0)</formula>
        <name>Update Dealer Downloads Costs</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_House_Account</fullName>
        <field>House_Account__c</field>
        <literalValue>1</literalValue>
        <name>Update House Account</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Infinity_Costs_Based_on_Appt_Goal</fullName>
        <field>Infinity_Costs__c</field>
        <formula>CASE( Appointment_Goal__c , 
17, 794,
20, 955,
25, 955,
35, 1438,
75, 2726,
null)</formula>
        <name>Update Infinity Costs Based on Appt Goal</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Inside_Costs_Based</fullName>
        <field>Inside_Costs__c</field>
        <formula>IF(Account__r.RecordType.Name = &apos;Dealer Account&apos;, 400 , 0)</formula>
        <name>Update Inside Costs Based</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <outboundMessages>
        <fullName>Admin_Trigger_Invoice_Update</fullName>
        <apiVersion>47.0</apiVersion>
        <endpointUrl>https://hooks.zapier.com/hooks/catch/499340/o445iyi/</endpointUrl>
        <fields>Account_Cancelled__c</fields>
        <fields>Account__c</fields>
        <fields>Added_To_Different_Billing_Invoice__c</fields>
        <fields>Additional_Costs__c</fields>
        <fields>Admin_Trigger__c</fields>
        <fields>Amount__c</fields>
        <fields>Appointment_Goal__c</fields>
        <fields>Assign_To_Correct_Account__c</fields>
        <fields>Billing_Invoice__c</fields>
        <fields>Check_Number__c</fields>
        <fields>Collections_Notes__c</fields>
        <fields>Commission__c</fields>
        <fields>ConnectionReceivedId</fields>
        <fields>ConnectionSentId</fields>
        <fields>CreatedById</fields>
        <fields>CreatedDate</fields>
        <fields>Dealer_Downloads_Costs__c</fields>
        <fields>Description__c</fields>
        <fields>Direct_Mail__c</fields>
        <fields>Email_Marketing__c</fields>
        <fields>Facebook_Ad_Spend__c</fields>
        <fields>Final_Invoice_Amount__c</fields>
        <fields>General_Agency_Service__c</fields>
        <fields>Gross_Profit__c</fields>
        <fields>House_Account__c</fields>
        <fields>ITEM_ID_QUICKBOOKS__c</fields>
        <fields>Id</fields>
        <fields>Income_Account__c</fields>
        <fields>Infinity_Costs__c</fields>
        <fields>Inside_Costs__c</fields>
        <fields>Invoice_Balance__c</fields>
        <fields>Invoice_Date__c</fields>
        <fields>Invoice_Due_Date__c</fields>
        <fields>Invoice_Sent_Date__c</fields>
        <fields>IsDeleted</fields>
        <fields>Is_Current_Month__c</fields>
        <fields>Is_Last_Month__c</fields>
        <fields>Is_Next_Month__c</fields>
        <fields>Is_Pipeline__c</fields>
        <fields>Item_ID__c</fields>
        <fields>LastModifiedById</fields>
        <fields>LastModifiedDate</fields>
        <fields>LastReferencedDate</fields>
        <fields>LastViewedDate</fields>
        <fields>Last_Month_Billed_Amount__c</fields>
        <fields>Line_Item_Number__c</fields>
        <fields>Local_SEO__c</fields>
        <fields>Media_Buy__c</fields>
        <fields>Memo__c</fields>
        <fields>Month_Before_Last_Billed_Amount__c</fields>
        <fields>Name</fields>
        <fields>New__c</fields>
        <fields>Next_Month_Billed_Amount__c</fields>
        <fields>Paid__c</fields>
        <fields>Payment_Amount__c</fields>
        <fields>Payment_Date__c</fields>
        <fields>Percent_of_Total_Invoice__c</fields>
        <fields>Pre_Billing_Invoice__c</fields>
        <fields>Product__c</fields>
        <fields>Projected_Invoice_Amount__c</fields>
        <fields>QB_Class__c</fields>
        <fields>QB_Invoice_Number__c</fields>
        <fields>QB_Invoice__c</fields>
        <fields>RecordTypeId</fields>
        <fields>SEM_PPC__c</fields>
        <fields>Service_QB_Picklist__c</fields>
        <fields>Service_Text__c</fields>
        <fields>Service__c</fields>
        <fields>Social_Media_Management__c</fields>
        <fields>SystemModstamp</fields>
        <fields>This_Month_Billed_Amount__c</fields>
        <fields>Twitter_Ad_Spend__c</fields>
        <fields>Unpaid_Amount__c</fields>
        <fields>Website__c</fields>
        <includeSessionId>false</includeSessionId>
        <integrationUser>sboudreau@abstraktmg.com</integrationUser>
        <name>Admin Trigger: Invoice Update</name>
        <protected>false</protected>
        <useDeadLetterQueue>false</useDeadLetterQueue>
    </outboundMessages>
    <rules>
        <fullName>Add Billed Amount and Appt Goal</fullName>
        <actions>
            <name>Populate_Appt_Goal</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Invoice__c.Amount__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Check Paid</fullName>
        <actions>
            <name>Check_the_Paid_Box</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Invoice__c.Invoice_Balance__c</field>
            <operation>equals</operation>
            <value>0</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Invoicing%3A Assign Line Items</fullName>
        <active>false</active>
        <criteriaItems>
            <field>Account.RecordTypeId</field>
            <operation>equals</operation>
            <value>Parent Account</value>
        </criteriaItems>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Invoicing%3A Assign Line Items Manual</fullName>
        <actions>
            <name>Uncheck_Box</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>Account.RecordTypeId</field>
            <operation>equals</operation>
            <value>Parent Account</value>
        </criteriaItems>
        <criteriaItems>
            <field>Invoice__c.Assign_To_Correct_Account__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Mark Paid When All Balance is %240</fullName>
        <actions>
            <name>Mark_Paid</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Invoice__c.Invoice_Balance__c</field>
            <operation>greaterThan</operation>
            <value>0</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Populate Accounting on Invoices</fullName>
        <active>false</active>
        <criteriaItems>
            <field>Invoice__c.CreatedDate</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <description>Populates Sr Accountant and Corporate Accountant when invoice is created</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Trigger%3A Invoice Update</fullName>
        <actions>
            <name>Admin_Trigger_Invoice_Update</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Invoice__c.Admin_Trigger__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Update Infinity Costs Based on Appt Goal - Inv</fullName>
        <actions>
            <name>Update_Dealer_Downloads_Costs</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Infinity_Costs_Based_on_Appt_Goal</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Inside_Costs_Based</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>Invoice__c.Appointment_Goal__c</field>
            <operation>notEqual</operation>
            <value>,0</value>
        </criteriaItems>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
